<div class="container">
  <div class="row">
    <div class="col">
      <h2>Profile page of <%= @user.name %>
        <span class="text-secondary">
        <% if user_signed_in? && @user.id == current_user.id %>
            (you)
          <% else %>
            (#<%= @user.id %>)
        <% end %>
        </span>
      </h2>
    </div>
    <p class="text-secondary">
      <% if user_signed_in? && @user.id == current_user.id %>
        Track your own stats, manage game copies or read what other users think about you.
      <% else %>
        See user's stats, game copies, give him credit, review him or report to authorities (scary).
      <% end %>
    </p>
  </div>
  <div class="card">
    <div class="card-body">
      <div class="row mt-2 align-items-center">
        <%= render 'user_snippet', user: @user %>
        <div class="ms-auto col-md-auto">
          <div class="d-flex gap-2">
            <% if @user != current_user %>
              <% unless @user.reviewed_by?(current_user) %>
              <%= link_to new_user_opinion_path(opinion_about_id: @user.id),
                          class: "btn btn-outline-primary", method: :put do %>
                <i class="bi bi-clipboard-check me-1"></i> Review
                <% end %>
              <% end %>
              <%= button_to nil,
                            class: "btn btn-outline-primary", method: :put do %>
                <i class="bi bi-flag me-1"></i> Report
              <% end %>
              <%= link_to "Manage deposit", edit_user_path(@user),
                          type: 'button',
                          class: "btn btn-outline-primary" if user_signed_in? && current_user.is_admin? %>
            <% end %>
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col">
          <% unless @user.description.nil? %>
            <h4>User description</h4>
            <p>
              <%= @user.description %>
            </p>
          <% end %>
          <%= render 'user_stats', user: @user %>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-md">
          <%= render 'user_copies', user: @user %>
        </div>
        <div class="col-md">
          <%= render 'user_opinions', about: @user %>
        </div>
      </div>
    </div>
  </div>
</div>
